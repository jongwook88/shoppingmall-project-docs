[TOC]

---

ìƒì„¸ì— ë°”ë¡œì£¼ë¬¸ ë„£ê¸°

# 1. íšŒì›ê°€ì…

![1562660477778](assets/1562660477778.png)

## ğŸˆController Test

### 1) íšŒì›ê°€ì… ìš”ì²­ TDD

**UserControllerTest.java**

```java
@Test
public void testJoinUser() throws Exception {

    UserVo userVo = new UserVo();
    userVo.setId("testId");
    userVo.setName("testUser");
    userVo.setPassword("1234");
    userVo.setPasswordQuestion("ê°€ì¥ ì•„ë¼ëŠ” ë³´ë¬¼ì€?");
    userVo.setPasswordAnswer("ìˆ˜ì²©");
    userVo.setPhoneNumber("010-9274-3036");
    userVo.setEmail("leeap1004@gmail.com");

    ResultActions resultActions = 
        mockMvc
        .perform(post("/user/join")
                 .contentType(MediaType.APPLICATION_JSON).content(new Gson().toJson(userVo)));

    resultActions 
        .andExpect(status().isOk()).andDo(print())
        .andExpect(jsonPath("$.result", is("success") ))
        .andExpect(jsonPath("$.result", is("success") ))
        .andExpect(jsonPath("$.data.name", is(userVo.getName())))
        .andExpect(jsonPath("$.data.phoneNumber", is(userVo.getPhoneNumber())));
}
```

**UserController.java**

```java
@Controller
@RequestMapping("/user")
public class UserController {

	@RequestMapping(value="/join", method=RequestMethod.POST) 
	public JSONResult joinUser(@RequestBody UserVo userVo) {
		return JSONResult.success(userVo);
	}
}
 
```

### 2) ì•„ì´ë”” ì¤‘ë³µì²´í¬

**UserControllerTest.java**

```java
@Test
public void testCheckId() throws Exception {

    String id = "userId";

    ResultActions resultActions = 
        mockMvc
        .perform(get("/api/user/checkId?id={id}", id)
                 .contentType(MediaType.APPLICATION_JSON));

    resultActions 
        .andExpect(status().isOk()).andDo(print())
        .andExpect(jsonPath("$.result", is("success") ))
        .andExpect(jsonPath("$.data", is(false))); 
    //  false : íšŒì›ê°€ì… ê°€ëŠ¥, true : ì¤‘ë³µ ì•„ì´ë”” ì¡´ì¬
}
```

**UserController.java**

```java
@RequestMapping(value="/checkId", method=RequestMethod.GET) 
public JSONResult checkId(@RequestParam(value="id") String id) {
    Boolean exist = false;
    return JSONResult.success(exist);
} 
```



## ğŸˆ UserService ì¶”ê°€

**UserController.java**

```java
@RestController("userAPIController")
@RequestMapping("/api/user")
public class UserController {

    @Autowired
    private UserService userService;

    @RequestMapping(value="/join", method=RequestMethod.POST) 
    public JSONResult joinUser(@RequestBody UserVo userVo) {
        UserVo vo = userService.joinUser(userVo);
        return JSONResult.success(vo);
    }

    @RequestMapping(value="/checkId", method=RequestMethod.GET) 
    public JSONResult checkId(@RequestParam(value="id") String id) {
        Boolean exist = false;
        return JSONResult.success(exist);
    } 

}
```

**UserService.java**

```java
@Service
public class UserService {
	public UserVo joinUser(UserVo userVo) {
		return userVo;
	}
	
	public Boolean checkId( String id) {
		Boolean exist = false;
		return exist;
	} 
}
```



## ğŸˆ UserDao ì¶”ê°€

**UserController.java**

```java
@RestController("userAPIController")
@RequestMapping("/api/user")
public class UserController {
	
	@Autowired
	private UserService userService;

	@RequestMapping(value="/join", method=RequestMethod.POST) 
	public JSONResult joinUser(@RequestBody UserVo userVo) {
		UserVo vo = userService.joinUser(userVo);
		return JSONResult.success(vo);
	}

	@RequestMapping(value="/checkId", method=RequestMethod.GET) 
	public JSONResult checkId(@RequestParam(value="id") String id) {
		Boolean exist = userService.checkId(id);
		return JSONResult.success(exist);
	} 
}
```

**UserService.java**

```java
@Service
public class UserService {
	@Autowired
	private UserDao userDao;
	
	public UserVo joinUser(UserVo userVo) {
		System.out.println("ë“¤ì–´ê°€ê¸°ì „ !!!!");
		UserVo vo = userDao.insert(userVo);
		System.out.println("ë“¤ì–´ê°”ë‹¤ì˜´!@!@!@!!!!");
		return vo;
	}
	
	public Boolean checkId( String id) {
		Boolean exist = userDao.getId(id);
		return exist;
	} 
}
```

**UserDao.java**

```java
@Repository
public class UserDao {
    @Autowired 
    private SqlSession sqlSession;

    public UserVo insert(UserVo vo) {
        return vo;
    }

    public Boolean getId(String id) {
        return false;
    }
}
```



# 2. ë¡œê·¸ì¸

![1562659826464](assets/login.png)

## ğŸˆController Test

### 1) ë¡œê·¸ì¸ ìš”ì²­ TDD

**UserControllerTest.java**

```java
@Test
public void testlogin() throws Exception {

    String id = "userId";
    String password = "userPW";

    ResultActions resultActions = 
        mockMvc
        .perform(get("/api/user/login?id={id}&password={password}", id, password)
                 .contentType(MediaType.APPLICATION_JSON));

    resultActions 
        .andExpect(status().isOk()).andDo(print())
        .andExpect(jsonPath("$.result", is("success") ))
        .andExpect(jsonPath("$.data", is(false))); 
    //  false : ë¡œê·¸ì¸ ì‹¤íŒ¨, true : ë¡œê·¸ì¸ ê°€ëŠ¥
}
```

**UserController.java**

```java
@RequestMapping(value="/login", method=RequestMethod.GET) 
public JSONResult login(@RequestParam(value="id") String id, @RequestParam(value="password") String password) {
    Boolean exist = userService.getUser(id, password);
    return JSONResult.success(exist);
} 
```

**UserService.java**

```java
public Boolean getUser(String id, String password) {
    Boolean exist = userDao.get(id, password);
    return exist;
}
```

**UserDao.java**

```java
public Boolean get(String id, String password) {
    return false;
}
```

> ì´í›„ëŠ” Controller ì½”ë“œë§Œ ì²¨ë¶€í•¨



### 2) ì•„ì´ë”” ì°¾ê¸° ìš”ì²­ TDD

> emailì„ íšŒì›tableì—ì„œ ì°¾ì•„, ìˆìœ¼ë©´ í•´ë‹¹ ë©”ì¼ë¡œ IDì „ì†¡ or ì¸ì¦ë²ˆí˜¸ ì „ì†¡

**UserController.java**

```java
@RequestMapping(value="/findId", method=RequestMethod.GET) 
public JSONResult findId(@RequestParam(value = "email") String email) {
    String userId = userService.getUser(email);
    return JSONResult.success(userId);
} 
```

**UserControllerTest.java**

```java
@Test
public void findId() throws Exception {

    String email = "leeap1004@gmail.com";

    ResultActions resultActions = 
        mockMvc
        .perform(get("/api/user/findId?email={email}", email)
                 .contentType(MediaType.APPLICATION_JSON));

    resultActions 
        .andExpect(status().isOk()).andDo(print())
        .andExpect(jsonPath("$.result", is("success") ))
        .andExpect(jsonPath("$.data", is(email))); 
}
```



### 3) ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° ìš”ì²­ TDD

> emailì„ íšŒì›tableì—ì„œ ì°¾ì•„, ìˆìœ¼ë©´ í•´ë‹¹ ë©”ì¼ë¡œ ì„ì˜ ë³€ê²½ PWì „ì†¡ or ì¸ì¦ë²ˆí˜¸ ì „ì†¡



# 3. ìƒí’ˆ ëª©ë¡

![1562659826464](assets/1562659826464.png)

## Controller Test

### 1) ìƒí’ˆë¦¬ìŠ¤íŠ¸ ì ‘ê·¼ ìš”ì²­ TDD

**UserControllerTest.java**

```java

```





# 4. ìƒí’ˆ ìƒì„¸

![1562659902012](assets/1562659902012.png)





# 5. ì¥ë°”êµ¬ë‹ˆ

![1562655774676](assets/productdetail.png)





# 6. ì£¼ë¬¸ë‚´ì—­ í™•ì¸

![checkorder](assets/checkorder.png)







